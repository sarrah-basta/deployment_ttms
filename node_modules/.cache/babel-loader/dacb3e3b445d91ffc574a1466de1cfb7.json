{"ast":null,"code":"var _jsxFileName = \"/home/sarrah/1_data/college/se lab/se project/TimeTableManagementSystem/src/components/TimeTable/time.js\";\nimport React, { useEffect } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport axios from 'axios';\nimport ReactLoading from \"react-loading\";\nimport { Button } from 'reactstrap';\nimport { ViewState, EditingState } from '@devexpress/dx-react-scheduler';\nimport { Scheduler, WeekView, MonthView, Appointments, ViewSwitcher, Toolbar, DragDropProvider, EditRecurrenceMenu } from '@devexpress/dx-react-scheduler-material-ui';\nexport default function Demo() {\n  const [flag, setFlag] = React.useState(0);\n  const start_slot1 = [0, 8, 9, 11, 12, 14, 15];\n  const start_slot2 = [0, 50, 50, 0, 0, 0, 0];\n  const end_slot1 = [0, 9, 10, 11, 12, 14, 15];\n  const end_slot2 = [0, 40, 40, 50, 50, 50, 50];\n  const day = {\n    'Monday': 1,\n    'Tuesday': 2,\n    'Wednesday': 3,\n    'Thursday': 4,\n    'Friday': 5\n  };\n  const today = 15;\n  useEffect(() => {\n    setFlag(0);\n    console.log(\"timetable created\");\n    const role = localStorage.getItem('role');\n    var name = '';\n\n    if (role === 'Faculty') {\n      name = localStorage.getItem('userName');\n      axios.post(`http://localhost:8080/api/query/time2`, name).then(res => {\n        console.log('gotta 1st response', res);\n\n        if (res.data.code === 200) {\n          axios.post(`http://localhost:8080/api/query/time4`, res.data.data[0]).then(result => {\n            console.log('sexond resoone', result);\n\n            if (res.data.code === 200) {\n              let faculty = result.data.data;\n              faculty.map(fac => appointments.push({\n                title: `${fac.dept_name} - ${fac.section}         ( ${Math.ceil(fac.semester / 2)} YEAR)`,\n                startDate: new Date(2020, 10, today + day[fac.day], start_slot1[fac.slot], start_slot2[fac.slot]),\n                endDate: new Date(2020, 10, today + day[fac.day], end_slot1[fac.slot], end_slot2[fac.slot]),\n                id: fac\n              }));\n              console.log(\"apoint\", appointments);\n              console.log('state', state);\n              setState({\n                data: appointments\n              });\n              setFlag(1);\n            } else {\n              console.log(result.data.message);\n            }\n          }).catch(err => {\n            console.error(err);\n          });\n        } else {\n          console.log(res.data.message);\n        }\n      }).catch(err => {\n        console.error(err);\n      });\n    } else if (role === 'Student') {\n      name = localStorage.getItem('userName');\n      axios.post(`http://localhost:8080/api/query/time1`, name).then(res => {\n        if (res.data.code === 200) {\n          console.log(\"1st reapsone\", res.data.data);\n          axios.post(`http://localhost:8080/api/query/time3`, res.data.data[0]).then(result => {\n            if (res.data.code === 200) {\n              let student = result.data.data;\n              console.log(start_slot1);\n              student.map(stud => appointments.push({\n                title: stud.course_name,\n                startDate: new Date(2020, 10, today + day[stud.day], start_slot1[stud.slot], start_slot2[stud.slot]),\n                endDate: new Date(2020, 10, today + day[stud.day], end_slot1[stud.slot], end_slot2[stud.slot]),\n                id: stud\n              }));\n              console.log(\"apoint\", appointments);\n              console.log('state', state);\n              setState({\n                data: appointments\n              });\n              setFlag(1);\n            } else {\n              console.log(result.data.message);\n            }\n          }).catch(err => {\n            console.error(err);\n          });\n        } else {\n          console.log(res.data.message);\n        }\n      }).catch(err => {\n        console.error(err);\n      });\n    }\n  }, []);\n\n  const logout = () => {\n    localStorage.clear();\n    window.location.href = '/';\n  };\n\n  const appointments = [];\n  const [state, setState] = React.useState({\n    data: appointments\n  });\n  console.log(appointments);\n  console.log('after mounting', state);\n\n  const commitChanges = ({\n    added,\n    changed,\n    deleted\n  }) => {\n    setState(state => {\n      let {\n        data\n      } = state;\n\n      if (added) {\n        const startingAddedId = data.length > 0 ? data[data.length - 1].id + 1 : 0;\n        data = [...data, {\n          id: startingAddedId,\n          ...added\n        }];\n      }\n\n      if (changed) {\n        data = data.map(appointment => changed[appointment.id] ? { ...appointment,\n          ...changed[appointment.id]\n        } : appointment);\n      }\n\n      if (deleted !== undefined) {\n        data = data.filter(appointment => appointment.id !== deleted);\n      }\n\n      return {\n        data\n      };\n    });\n  };\n\n  return flag === 1 ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"danger\",\n    onClick: logout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }, \"Exit\"), /*#__PURE__*/React.createElement(Paper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Scheduler, {\n    data: state.data,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ViewState, {\n    defaultCurrentDate: \"2020-11-16\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(EditingState, {\n    onCommitChanges: commitChanges,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(WeekView, {\n    startDayHour: 8,\n    endDayHour: 17,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(MonthView, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Appointments, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Toolbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(ViewSwitcher, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(EditRecurrenceMenu, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(DragDropProvider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 9\n    }\n  })))) : /*#__PURE__*/React.createElement(ReactLoading, {\n    type: \"bubbles\",\n    color: \"#16a596\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 20\n    }\n  });\n}","map":{"version":3,"sources":["/home/sarrah/1_data/college/se lab/se project/TimeTableManagementSystem/src/components/TimeTable/time.js"],"names":["React","useEffect","Paper","axios","ReactLoading","Button","ViewState","EditingState","Scheduler","WeekView","MonthView","Appointments","ViewSwitcher","Toolbar","DragDropProvider","EditRecurrenceMenu","Demo","flag","setFlag","useState","start_slot1","start_slot2","end_slot1","end_slot2","day","today","console","log","role","localStorage","getItem","name","post","then","res","data","code","result","faculty","map","fac","appointments","push","title","dept_name","section","Math","ceil","semester","startDate","Date","slot","endDate","id","state","setState","message","catch","err","error","student","stud","course_name","logout","clear","window","location","href","commitChanges","added","changed","deleted","startingAddedId","length","appointment","undefined","filter"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport axios from 'axios';\r\nimport ReactLoading from \"react-loading\";\r\nimport { Button } from 'reactstrap';\r\nimport { ViewState, EditingState } from '@devexpress/dx-react-scheduler';\r\nimport {\r\n  Scheduler,\r\n  WeekView,\r\n  MonthView,\r\n  Appointments,\r\n  ViewSwitcher,\r\n  Toolbar,\r\n  DragDropProvider,\r\n  EditRecurrenceMenu,\r\n} from '@devexpress/dx-react-scheduler-material-ui';\r\n\r\n\r\nexport default function Demo () {\r\n    const [flag, setFlag] = React.useState(0);\r\n\r\n    const start_slot1 = [0 , 8, 9, 11, 12, 14, 15];\r\n    const start_slot2 = [0, 50, 50, 0, 0, 0 ,0];\r\n    const end_slot1 = [0, 9, 10, 11, 12, 14, 15];\r\n    const end_slot2 = [0, 40, 40, 50, 50, 50, 50];\r\n    const day = {\r\n        'Monday':1,\r\n        'Tuesday': 2,\r\n        'Wednesday': 3,\r\n        'Thursday': 4,\r\n        'Friday': 5\r\n    }\r\n    const today = 15;\r\n\r\n    useEffect(() => {\r\n        setFlag(0);\r\n        console.log(\"timetable created\");\r\n        const role = localStorage.getItem('role');\r\n        var name = '';\r\n        if (role === 'Faculty') {\r\n            name = localStorage.getItem('userName');\r\n            axios\r\n            .post(`http://localhost:8080/api/query/time2`,name)\r\n            .then((res) => {\r\n              console.log('gotta 1st response',res);\r\n            if (res.data.code === 200){\r\n                axios\r\n                .post(`http://localhost:8080/api/query/time4`,(res.data.data[0]))\r\n                .then((result) => {\r\n                  console.log('sexond resoone', result)\r\n                if (res.data.code === 200){\r\n                    let faculty = result.data.data;\r\n                    faculty.map(fac => (\r\n                        appointments.push({\r\n                            title: `${fac.dept_name} - ${fac.section}         ( ${Math.ceil(fac.semester/2)} YEAR)`,\r\n                            startDate: new Date(2020, 10, today+day[fac.day], start_slot1[fac.slot], start_slot2[fac.slot]),\r\n                            endDate: new Date(2020, 10, today+day[fac.day], end_slot1[fac.slot], end_slot2[fac.slot]),\r\n                            id: fac,\r\n                          })\r\n                    ));\r\n                    console.log(\"apoint\", appointments);\r\n                    console.log('state', state);\r\n                    setState({data: appointments});\r\n                    setFlag(1);\r\n                    \r\n                } else {\r\n                    console.log(result.data.message)\r\n                }\r\n                })\r\n                .catch(err => {\r\n                console.error(err);\r\n                });\r\n            } else {\r\n                console.log(res.data.message)\r\n            }\r\n            })\r\n            .catch(err => {\r\n            console.error(err);\r\n            });\r\n\r\n        } else if (role === 'Student') {\r\n            name = localStorage.getItem('userName');\r\n            axios\r\n            .post(`http://localhost:8080/api/query/time1`,name)\r\n            .then((res) => {\r\n            if (res.data.code === 200){\r\n                console.log(\"1st reapsone\",res.data.data);\r\n                axios\r\n                .post(`http://localhost:8080/api/query/time3`,(res.data.data[0]))\r\n                .then((result) => {\r\n                if (res.data.code === 200){\r\n                    let student = result.data.data;\r\n                    console.log(start_slot1);\r\n                    student.map(stud => (\r\n                        appointments.push({\r\n                            title: stud.course_name,\r\n                            startDate: new Date(2020, 10, today+day[stud.day], start_slot1[stud.slot], start_slot2[stud.slot]),\r\n                            endDate: new Date(2020, 10, today+day[stud.day], end_slot1[stud.slot], end_slot2[stud.slot]),\r\n                            id: stud,\r\n                          })\r\n                    ));\r\n                    console.log(\"apoint\", appointments);\r\n                    console.log('state', state);\r\n                    setState({data: appointments});\r\n                    setFlag(1);\r\n                    \r\n                } else {\r\n                    console.log(result.data.message)\r\n                }\r\n                })\r\n                .catch(err => {\r\n                console.error(err);\r\n                });\r\n            } else {\r\n                console.log(res.data.message)\r\n            }\r\n            })\r\n            .catch(err => {\r\n            console.error(err);\r\n            });\r\n            \r\n        }\r\n    }, []);\r\n\r\n    const logout = () => {\r\n      localStorage.clear();\r\n      window.location.href = '/';\r\n    }\r\n\r\n    const appointments = [\r\n        \r\n    ];\r\n    const [state, setState] = React.useState({data: appointments});\r\n    console.log(appointments);\r\n    console.log('after mounting',state);\r\n    const commitChanges = ({ added, changed, deleted }) => {\r\n        setState((state) => {\r\n          let { data } = state;\r\n          if (added) {\r\n            const startingAddedId = data.length > 0 ? data[data.length - 1].id + 1 : 0;\r\n            data = [...data, { id: startingAddedId, ...added }];\r\n          }\r\n          if (changed) {\r\n            data = data.map(appointment => (\r\n              changed[appointment.id] ? { ...appointment, ...changed[appointment.id] } : appointment));\r\n          }\r\n          if (deleted !== undefined) {\r\n            data = data.filter(appointment => appointment.id !== deleted);\r\n          }\r\n          return { data };\r\n        });\r\n  }\r\n\r\n    return (\r\n        flag === 1 ?\r\n        <div>\r\n        <Button color=\"danger\" onClick={logout}>Exit</Button>\r\n            <Paper>\r\n      <Scheduler\r\n        data={state.data}\r\n      >\r\n        <ViewState\r\n          defaultCurrentDate=\"2020-11-16\"\r\n        />\r\n        <EditingState\r\n          onCommitChanges={commitChanges}\r\n        />\r\n        <WeekView\r\n          startDayHour={8}\r\n          endDayHour={17}\r\n        />\r\n        <MonthView />\r\n        <Appointments />\r\n\r\n        <Toolbar />\r\n        <ViewSwitcher />\r\n\r\n        <EditRecurrenceMenu />\r\n\r\n        <DragDropProvider />\r\n      </Scheduler>\r\n    </Paper>\r\n        </div>   : <ReactLoading type={\"bubbles\"} color={\"#16a596\"} />\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}